{% extends 'base.html' %}
{% load static %}

{% block title %}Apply for {{ job.title }} - JobML Platform{% endblock %}

{% block content %}
<!-- Page Header Start -->
<div class="page-header">
  <div class="container">
    <div class="row">         
      <div class="col-lg-12">
        <div class="inner-header">
          <h3>Apply for Job</h3>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Page Header End --> 

<!-- Content section Start --> 
<section id="content" class="section-padding">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8 col-md-10 col-xs-12">
        <div class="page-login-form box" style="background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
          
          <!-- Job Summary -->
          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 30px; border-radius: 10px; margin-bottom: 30px; color: white; text-align: center;">
            <i class="lni-briefcase" style="font-size: 64px; display: block; margin-bottom: 15px;"></i>
            <h3 style="color: white; margin-bottom: 10px; font-weight: 600;">{{ job.title }}</h3>
            <p style="margin: 5px 0; opacity: 0.95;"><i class="lni-home"></i> {{ job.company.company_name }}</p>
            <p style="margin: 5px 0; opacity: 0.95;"><i class="lni-map-marker"></i> {{ job.location }}</p>
            <p style="margin: 5px 0; opacity: 0.95;"><i class="lni-alarm-clock"></i> {{ job.job_type }}</p>
          </div>

          <div style="text-align: center; margin-bottom: 30px;">
            <h4 style="color: #333; margin-bottom: 15px; font-weight: 600;">Confirm Your Application</h4>
            <p style="color: #666; font-size: 16px; line-height: 1.6;">
              You are about to apply for this position. Click the button below to submit your application.
            </p>
          </div>

          <!-- Profile Info -->
          <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h5 style="color: #333; margin-bottom: 15px; font-weight: 600;"><i class="lni-user"></i> Your Application Details</h5>
            <div style="color: #555; line-height: 1.8;">
              <p><strong>Name:</strong> {{ user.first_name }} {{ user.last_name }}</p>
              <p><strong>Email:</strong> {{ user.email }}</p>
              {% if user.jobseeker_profile.phone %}
              <p><strong>Phone:</strong> {{ user.jobseeker_profile.phone }}</p>
              {% endif %}
              {% if user.jobseeker_profile.education_level %}
              <p><strong>Education:</strong> {{ user.jobseeker_profile.get_education_level_display }}</p>
              {% endif %}
              {% if user.jobseeker_profile.years_experience %}
              <p><strong>Experience:</strong> {{ user.jobseeker_profile.years_experience }} years</p>
              {% endif %}
              {% if user.jobseeker_profile.resume %}
              <p><strong>Resume:</strong> <a href="{{ user.jobseeker_profile.resume.url }}" target="_blank" style="color: #4c6ef5;">View Resume</a></p>
              {% endif %}
            </div>
          </div>

          <form method="post" action="{% url 'jobs:apply_job' job.id %}">
            {% csrf_token %}
            
            <div class="alert alert-info" style="background: #e7f5ff; border: 1px solid #4c6ef5; color: #1864ab; border-radius: 6px;">
              <i class="lni-information"></i> <strong>Note:</strong> Your profile information will be shared with the employer. Make sure your profile is complete and up-to-date.
            </div>

            <div style="text-align: center; margin-top: 30px;">
              <button type="submit" class="btn btn-lg" style="background: linear-gradient(135deg, #51cf66 0%, #37b24d 100%); color: white; padding: 15px 50px; border: none; border-radius: 50px; font-size: 18px; font-weight: 600; cursor: pointer; transition: all 0.3s; box-shadow: 0 4px 15px rgba(81, 207, 102, 0.3);" onmouseover="this.style.transform='translateY(-2px) scale(1.05)'; this.style.boxShadow='0 6px 20px rgba(81, 207, 102, 0.4)'" onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 4px 15px rgba(81, 207, 102, 0.3)'">
                <i class="lni-check-mark-circle"></i> Confirm & Submit Application
              </button>
              <br>
              <a href="{% url 'jobs:job_detail' job.id %}" style="display: inline-block; margin-top: 15px; color: #666; text-decoration: none; font-size: 14px;">
                <i class="lni-arrow-left"></i> Back to Job Details
              </a>
            </div>
          </form>

        </div>
      </div>
    </div>
  </div>
</section>
<!-- Content section End -->
{% endblock %}
